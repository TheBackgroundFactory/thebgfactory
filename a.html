<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <script type="application/javascript">
function init(){
  	window.requestAnimationFrame(draw);
}

function draw() {
  var canvas = document.getElementById("canvas");
  var ctx = canvas.getContext('2d');

  var w = canvas.width = window.innerWidth
  var h = canvas.height = window.innerHeight

  ctx.globalCompositeOperation = 'destination-over';
  ctx.clearRect(0,0,w,h); // clear canvas

  ctx.fillStyle = 'rgba(0,0,0,0.4)';
  ctx.strokeStyle = 'rgba(0,153,255,0.4)';
  ctx.save();
  ctx.translate(150,150);

  // Earth
  var time = new Date();
  ctx.rotate( ((2*Math.PI)/60)*time.getSeconds() + ((2*Math.PI)/60000)*time.getMilliseconds() );
  ctx.translate(105,0);
  ctx.fillRect(0,-12,50,24); // Shadow

  // Moon
  ctx.save();
  ctx.rotate( ((2*Math.PI)/6)*time.getSeconds() + ((2*Math.PI)/6000)*time.getMilliseconds() );
  ctx.translate(0,28.5);
  ctx.restore();

  ctx.restore();
  
  ctx.beginPath();
  ctx.arc(150,150,105,0,Math.PI*2,false); // Earth orbit
  ctx.stroke();

  window.requestAnimationFrame(draw);
}

init();
  </script>
 </head>
 <body onload="init();">
   <canvas id="canvas"></canvas>
 </body>
</html>